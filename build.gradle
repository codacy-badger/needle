plugins {
    id 'java'
    id 'java-library'
    id "org.jetbrains.kotlin.jvm" version "1.3.72"
    id 'io.franzbecker.gradle-lombok' version '3.3.0'
}

allprojects {

    group "org.sheinbergon"
    version "0.1.0"

    sourceCompatibility = 11

    repositories {
        mavenLocal()
        mavenCentral()
        jcenter()
    }
}

subprojects {

    apply plugin: 'java-library'
    apply plugin: 'org.jetbrains.kotlin.jvm'
    apply plugin: 'io.franzbecker.gradle-lombok'

    dependencies {
        api "net.java.dev.jna:jna-platform:5.5.0"
        api "com.google.guava:guava:29.0-jre"

        testImplementation "com.natpryce:hamkrest:1.7.0.3"
        testImplementation "org.amshove.kluent:kluent:1.61"
        testImplementation "org.jetbrains.kotlinx:atomicfu:0.14.3"
        testImplementation "org.jetbrains.kotlin:kotlin-stdlib"

        testImplementation "org.junit.jupiter:junit-jupiter:5.6.2"
        testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.2'
    }

    compileTestKotlin {
        kotlinOptions {
            jvmTarget = 11
        }
    }

    test {
        useJUnitPlatform()
        testLogging {
            events "passed", "skipped", "failed"
        }
    }
}

wrapper {
    gradleVersion = "6.3"
}